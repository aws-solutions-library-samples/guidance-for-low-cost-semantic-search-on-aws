<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document Vector Database</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/js/all.min.js" integrity="sha512-b+nQTCdtTBIRIbraqNEwsjB6UvL3UEMkXnhzd8awtCYh0Kcsjl9uEgwVFVbhoj3uu1DO1ZMacNvLoyJJiNfcvg==" crossorigin="anonymous"></script>
    <script src="js/utils.js"></script>
    <script src="js/upload.js"></script>
    <script src="js/prompt.js"></script>
    <script src="js/chatapp.js"></script>
    <link rel="stylesheet" href="style/styles.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <header>
            <h1>Document Vector Database</h1>
            <div id="user-info" class="user-info">
                <!-- User info will be added dynamically -->
            </div>
        </header>

        <div class="main-content">
            <!-- Sidebar with document explorer -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h2>Document Explorer</h2>
                    <button id="display-docs" class="btn btn-sm btn-secondary">
                        <i class="fas fa-folder-open"></i> Browse
                    </button>
                </div>
                
                <div id="file-list" class="file-list hidden">
                    <!-- File items will be dynamically added here -->
                </div>
                
                <div class="upload-section">
                    <div class="file-input-wrapper">
                        <input type="file" id="file-upload" multiple accept=".pdf">
                        <label for="file-upload" class="file-input-label">
                            <i class="fas fa-file-pdf"></i> Choose PDF files
                        </label>
                    </div>
                    <button id="upload-btn" class="btn">
                        <i class="fas fa-upload"></i> Upload Files
                    </button>
                </div>
            </div>

            <!-- Main content area -->
            <div class="content-area">
                <!-- Tabs navigation -->
                <div class="tab-container">
                    <button class="tab active">Configuration</button>
                    <button id="tabPrompting" class="tab">Prompting</button>
                </div>

                <!-- Tab content -->
                <div class="tab-content active">
                    <div class="form-group">
                        <label for="chunk-size">Parser</label>
                        <select id="chunk-size" class="form-control">
                            <option value="llm">LLM</option>
                            <option value="tx">Textract</option>
                        </select>
                    </div>
                </div>

                <div class="tab-content">
                    <div class="form-group">
                        <label for="prompt-input">System Prompt</label>
                        <textarea id="prompt-input" class="form-control" placeholder="Enter your system prompt"></textarea>
                    </div>
                    <button id="prompt-submit" class="btn">
                        <i class="fas fa-save"></i> Save Prompt
                    </button>
                </div>

                <!-- Chat section -->
                <div class="chat-container">
                    <div class="chat-header">Ask questions about your documents</div>
                    
                    <div class="chat-messages">
                        <!-- Messages will be dynamically added here -->
                    </div>
                    
                    <form id="chat-input-form" class="chat-input-form">
                        <input type="text" class="chat-input" placeholder="Type your question here..." required>
                        <button type="submit" id="chat-button" class="send-button">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
                
                <button class="btn clear-chat-button">
                    <i class="fas fa-trash"></i> Clear Chat
                </button>
            </div>
        </div>

        <footer>
            <p>&copy; 2025 Document Vector Database. All rights reserved.</p>
        </footer>
    </div>

    <!-- HTML Templates Section -->
    <!-- These templates will be used instead of direct innerHTML manipulation -->
    <template id="chat-message-template">
        <div class="message slide-in">
            <div class="message-sender"></div>
            <div class="message-text"></div>
            <div class="message-timestamp"></div>
        </div>
    </template>

    <template id="loading-message-template">
        <div class="message gray-bg slide-in">
            <div class="message-sender">AI Assistant</div>
            <div class="message-text">
                <div class="typing-indicator">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </div>
    </template>

    <template id="notification-template">
        <div class="notification fade-in">
            <div class="notification-icon"></div>
            <div class="notification-content"></div>
            <button class="notification-close">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </template>

    <template id="notification-confirmation-template">
        <div class="notification modal confirmation fade-in">
            <div class="notification-icon"></div>
            <div class="notification-content"></div>
            <div class="notification-actions">
                <button class="btn btn-secondary" id="cancel-btn"></button>
                <button class="btn" id="confirm-btn"></button>
            </div>
        </div>
    </template>

    <template id="file-item-template">
        <div class="file-item slide-in">
            <div class="file-name"></div>
            <div class="progress-bar">
                <div class="progress" style="width: 0%"></div>
            </div>
        </div>
    </template>

    <template id="file-list-item-template">
        <div class="file-item slide-in">
            <div class="file-name"></div>
            <div class="list-file-key hidden"></div>
            <div class="file-info">
                <div class="file-size"></div>
                <button class="delete-btn"><i class="fas fa-trash"></i></button>
            </div>
        </div>
    </template>

    <!-- Script for tabs -->
    <script>
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabs.forEach((tab, index) => {
            tab.addEventListener('click', () => {
                // Remove active class from all tabs and tab contents
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // Add active class to the clicked tab and its corresponding tab content
                tab.classList.add('active');
                tabContents[index].classList.add('active');
            });
        });
        
        // Show notification function
        function showNotification(message, type = 'info') {
            const notificationUtils = new NotificationUtils();
            notificationUtils.showNotification(message, type);
        }
    </script>

    <!-- Hidden elements for configuration values -->
    <div id="apiendpointupload" style="display: none;"></div>
    <div id="apiendpointconfig" style="display: none;"></div>
    <div id="apiendpointchat" style="display: none;"></div>
    <div id="apiendpointdocuments" style="display: none;"></div>
    <div id="signinurl" style="display: none;"></div>
    <div id="cognito-client-id" style="display: none;"></div>
    <div id="cognito-region" style="display: none;"></div>
</body>
</html>
